<!-- index.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Système de Recyclage d'Eau - Sartex Group</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
  <header class="main-header">
    <div class="header-left">
      <img src="sartex_logo.png" alt="Logo Sartex" class="logo">
      <span class="brand">Sartex<br>Group</span>
    </div>
    <nav class="header-nav">
      <a href="#" class="nav-link active">
        <i class="fas fa-house nav-icon"></i>
        Accueil
      </a>
      <a href="#" class="nav-link" id="logout-link" onclick="if(confirm('Êtes-vous sûr de vouloir vous déconnecter ?')){localStorage.removeItem('session_user');window.location.href='login.html';} return false;">
        <i class="fas fa-sign-out-alt nav-icon"></i>
        Déconnexion
      </a>
    </nav>
  </header>
  <div class="dashboard-header">
    <div class="dashboard-title">
      <i class="fas fa-recycle dashboard-title-icon" style="color:#fff;font-size:48px;margin-right:16px;vertical-align:middle;"></i>
      Système de Recyclage d'Eau - Sartex Group
    </div>
    <div class="dashboard-update" id="dashboardUpdate">
      <span id="dashboardTimeIcon"><i class="fas fa-clock" style="color:#fff;font-size:24px;vertical-align:middle;margin-right:8px;"></i></span>
      Dernière mise à jour: <span id="dashboardTimeText">--:--:--</span> <span style="color:#43a047;font-weight:bold;margin-left:8px;">• Temps réel</span>
    </div>
  </div>
  <div class="dashboard" id="dashboard">
    <div class="dashboard-row">
      <div class="card water-level">
        <div class="card-title">
          <span class="bassin-icon" style="background:#204080;display:flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:16px;box-shadow:0 4px 16px #20408022;">
            <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 5C19 5 8 18.5 8 25.5C8 31.0228 13.4772 33 19 33C24.5228 33 30 31.0228 30 25.5C30 18.5 19 5 19 5Z" fill="#fff"/>
              <path d="M19 28.5C16.2386 28.5 14 26.2614 14 23.5" stroke="#204080" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </span>
          Bassin Eau Osmosé
          <span id="status-osmose"></span>
        </div>
        <div class="card-content">
          <div class="circle-container">
            <svg viewBox="0 0 120 120" class="circle-svg">
              <circle cx="60" cy="60" r="53" fill="none" stroke="#888" stroke-width="2" opacity="0.18" />
              <circle cx="60" cy="60" r="46" fill="none" stroke="#888" stroke-width="2" opacity="0.28" />
              <circle cx="60" cy="60" r="40" fill="#fff" />
              <circle cx="60" cy="60" r="40" fill="none" stroke="#ffa726" stroke-width="10" stroke-dasharray="251.2" stroke-dashoffset="0" id="waterCircle" />
            </svg>
            <div class="water-value" id="waterValue">78%</div>
          </div>
          <div class="bassin-infos-table">
            <div class="bassin-info-row"><span class="bassin-info-label">Pompes actives:</span> <span class="bassin-info-value" style="color:#204080;font-weight:bold;">0/2</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Alarmes:</span> <span class="bassin-info-value" style="color:#43a047;font-weight:bold;">0</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Automate:</span> <span class="bassin-info-value"><a href="#" style="color:#1976d2;font-weight:bold;text-decoration:none;">DVP28SV-01</a></span></div>
          </div>
        </div>
        <hr class="bassin-separator">
        <div class="bassin-details" onclick="window.location.href='details.html?bassin=osmose'" style="cursor:pointer;"><span class="bassin-details-arrow">→</span> Cliquez pour plus de détails</div>
      </div>
      <div class="card">
        <div class="card-title">
          <span class="bassin-icon" style="background:#a31963;display:flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:16px;box-shadow:0 4px 16px #a3196322;">
            <i class="fas fa-flask-vial" style="color:#fff;font-size:38px;"></i>
          </span>
          Bassin Teinture
          <span id="status-teinture"></span>
        </div>
        <div class="card-content">
          <div class="circle-container">
            <svg viewBox="0 0 120 120" class="circle-svg">
              <circle cx="60" cy="60" r="53" fill="none" stroke="#888" stroke-width="2" opacity="0.18" />
              <circle cx="60" cy="60" r="46" fill="none" stroke="#888" stroke-width="2" opacity="0.28" />
              <circle cx="60" cy="60" r="40" fill="#fff" />
              <circle cx="60" cy="60" r="40" fill="none" stroke="#a31963" stroke-width="10" stroke-dasharray="251.2" stroke-dashoffset="0" id="teintureCircle" />
            </svg>
            <div class="water-value" id="teintureValue">0 %</div>
          </div>
          <div class="bassin-infos-table">
            <div class="bassin-info-row"><span class="bassin-info-label">Pompes actives:</span> <span class="bassin-info-value" style="color:#a31963;font-weight:bold;">1/2</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Alarmes:</span> <span class="bassin-info-value" style="color:#a31963;font-weight:bold;">0</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Automate:</span> <span class="bassin-info-value"><a href="#" style="color:#1976d2;font-weight:bold;text-decoration:none;">DVP28SV-02</a></span></div>
          </div>
        </div>
        <hr class="bassin-separator">
        <div class="bassin-details" onclick="window.location.href='details.html?bassin=teinture'" style="cursor:pointer;"><span class="bassin-details-arrow">→</span> Cliquez pour plus de détails</div>
      </div>
    </div>
    <div class="dashboard-row">
      <div class="card">
        <div class="card-title">
          <span class="bassin-icon" style="background:#ff9800;display:flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:16px;box-shadow:0 4px 16px #ff980022;">
            <i class="fas fa-industry" style="color:#fff;font-size:38px;"></i>
          </span>
          Bassin Chaudière
          <span id="status-chardiniaire"></span>
        </div>
        <div class="card-content">
          <div class="circle-container">
            <svg viewBox="0 0 120 120" class="circle-svg">
              <circle cx="60" cy="60" r="53" fill="none" stroke="#888" stroke-width="2" opacity="0.18" />
              <circle cx="60" cy="60" r="46" fill="none" stroke="#888" stroke-width="2" opacity="0.28" />
              <circle cx="60" cy="60" r="40" fill="#fff" />
              <circle cx="60" cy="60" r="40" fill="none" stroke="#43a047" stroke-width="10" stroke-dasharray="251.2" stroke-dashoffset="0" id="chardiniaireCircle" />
            </svg>
            <div class="water-value" id="chardiniaireValue">0 %</div>
          </div>
          <div class="bassin-infos-table">
            <div class="bassin-info-row"><span class="bassin-info-label">Pompes actives:</span> <span class="bassin-info-value" style="color:#ff9800;font-weight:bold;">1/2</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Pression:</span> <span class="bassin-info-value" style="color:#ff9800;font-weight:bold;">0 bar</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Automate:</span> <span class="bassin-info-value"><a href="#" style="color:#1976d2;font-weight:bold;text-decoration:none;">DVP28SV-03</a></span></div>
          </div>
        </div>
        <hr class="bassin-separator">
        <div class="bassin-details" onclick="window.location.href='details.html?bassin=chaudiere'" style="cursor:pointer;"><span class="bassin-details-arrow">→</span> Cliquez pour plus de détails</div>
      </div>
      <div class="card">
        <div class="card-title">
          <span class="bassin-icon" style="background:#00bcd4;display:flex;align-items:center;justify-content:center;width:56px;height:56px;border-radius:16px;box-shadow:0 4px 16px #00bcd422;">
            <i class="fas fa-soap" style="color:#fff;font-size:38px;"></i>
          </span>
          Bassin Lavage
          <span id="status-lavage"></span>
        </div>
        <div class="card-content">
          <div class="circle-container">
            <svg viewBox="0 0 120 120" class="circle-svg">
              <circle cx="60" cy="60" r="53" fill="none" stroke="#888" stroke-width="2" opacity="0.18" />
              <circle cx="60" cy="60" r="46" fill="none" stroke="#888" stroke-width="2" opacity="0.28" />
              <circle cx="60" cy="60" r="40" fill="#fff" />
              <circle cx="60" cy="60" r="40" fill="none" stroke="#1976d2" stroke-width="10" stroke-dasharray="251.2" stroke-dashoffset="0" id="lavageCircle" />
            </svg>
            <div class="water-value" id="lavageValue">0 %</div>
          </div>
          <div class="bassin-infos-table">
            <div class="bassin-info-row"><span class="bassin-info-label">Pompes actives:</span> <span class="bassin-info-value" style="color:#00bcd4;font-weight:bold;">1/2</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Débit:</span> <span class="bassin-info-value" style="color:#00bcd4;font-weight:bold;">0 L/min</span></div>
            <div class="bassin-info-separator"></div>
            <div class="bassin-info-row"><span class="bassin-info-label">Automate:</span> <span class="bassin-info-value"><a href="#" style="color:#1976d2;font-weight:bold;text-decoration:none;">DVP28SV-04</a></span></div>
          </div>
        </div>
        <hr class="bassin-separator">
        <div class="bassin-details" onclick="window.location.href='details.html?bassin=lavage'" style="cursor:pointer;"><span class="bassin-details-arrow">→</span> Cliquez pour plus de détails</div>
      </div>
    </div>
  </div>
  <div class="system-overview">
    <h2 class="overview-title"><span class="overview-icon"><i class="fas fa-chart-bar"></i></span> Vue d'Ensemble du Système</h2>
    <div class="overview-list">
      <div class="overview-item">
        <div class="overview-item-icon" style="background:#204080;"><svg width="38" height="38" viewBox="0 0 38 38"><rect x="8" y="10" width="22" height="6" rx="3" fill="#fff"/><rect x="8" y="22" width="22" height="6" rx="3" fill="#fff"/><circle cx="13" cy="13" r="1.5" fill="#204080"/><circle cx="13" cy="25" r="1.5" fill="#204080"/></svg></div>
        <div class="overview-item-value">4/4</div>
        <div class="overview-item-label">Bassins en ligne</div>
      </div>
      <div class="overview-item">
        <div class="overview-item-icon" style="background:#204080;"><svg width="38" height="38" viewBox="0 0 38 38" fill="none"><g><circle cx="19" cy="19" r="15" fill="#fff"/><g stroke="#204080" stroke-width="2"><circle cx="19" cy="19" r="7" fill="none"/><circle cx="19" cy="19" r="3" fill="#204080"/></g></g></svg></div>
        <div class="overview-item-value">7/8</div>
        <div class="overview-item-label">Pompes actives</div>
      </div>
      <div class="overview-item">
        <div class="overview-item-icon" style="background:#ff9800;"><svg width="38" height="38" viewBox="0 0 38 38" fill="none"><rect width="38" height="38" rx="8" fill="#fff"/><path d="M19 13v7" stroke="#ff9800" stroke-width="2" stroke-linecap="round"/><circle cx="19" cy="25" r="1.5" fill="#ff9800"/></svg></div>
        <div class="overview-item-value">0</div>
        <div class="overview-item-label">Alarmes actives</div>
      </div>
    </div>
  </div>
  <div class="alarms-page" id="alarmsPage" style="display:none;">
    <h2 class="alarms-title" style="margin-top: 100px;"><span class="alarms-icon">⚠️</span> Historique des Alarmes</h2>
    <div class="alarms-filters">
      <select id="alarmTypeFilter">
        <option value="all">Tous les types</option>
        <option value="thermique_p1">Défaut thermique pompe 1</option>
        <option value="thermique_p2">Défaut thermique pompe 2</option>
        <option value="haut">Niveau très haut</option>
        <option value="bas">Niveau très bas</option>
      </select>
      <button class="alarms-clear" id="clearFilters">Effacer les filtres</button>
    </div>
    <div class="alarms-table-container">
      <table class="alarms-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Heure</th>
            <th>Type d'Alarme</th>
            <th>Commentaire</th>
          </tr>
        </thead>
        <tbody id="alarmsTableBody">
          <!-- Lignes d'alarmes dynamiques -->
        </tbody>
      </table>
    </div>
  </div>
  <script src="script.js"></script>
  <script>
  // Redirection si non connecté
  if (!localStorage.getItem('session_user')) {
    window.location.href = 'login.html';
  }
  </script>
</body>
</html>
